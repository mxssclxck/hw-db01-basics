# Домашнее задание к занятию "1. Типы и структура СУБД"
# Никоноров Денис - FOPS-6

## Задача 1
Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

* Электронные чеки в json виде
* Склады и автомобильные дороги для логистической компании
* Генеалогические деревья
* Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
* Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

**Ответ**

1. Для хранения электронных чеков в json формате, подходящим типом СУБД будет документо-ориентированная база данных, такая как MongoDB. В этой СУБД данные хранятся в формате документов, что подходит для хранения чеков в виде json объектов.

2. Для хранения информации о складах и автомобильных дорогах для логистической компании, нужна реляционная СУБД, например, PostgreSQL. Такая БД подходит для хранения больших объемов структурированных данных, которые связаны отношениями между таблицами.

3. Для хранения генеалогических деревьев наиболее подходящим типом СУБД будет графовая база данных, как например, Neo4j. Графовые базы данных предназначены для эффективного хранения и обработки данных в виде графа, что позволяет легко отслеживать связи между различными сущностями.

4. Для кеша идентификаторов клиентов с ограниченным временем жизни для движка аутентификации, подходящим типом СУБД будет ключ-значение база данных, например, Redis. Эта БД оптимизирована для эффективного хранения пар ключ-значение, что является идеальным подходом для кэширования данных.

5. Для отношений клиент-покупка в интернет-магазине, требуется реляционная СУБД, например, MySQL. Реляционные СУБД позволяют легко создавать и связывать таблицы, которые отображают отношения между различными типами данных, таким образом, это наиболее подходящий тип БД для данный сущности.


## Задача 2
Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

* Данные записываются на все узлы с задержкой до часа (асинхронная запись)
* При сетевых сбоях, система может разделиться на 2 раздельных кластера
* Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

**Ответ**

Для каждой реализации системы можно провести классификацию по CAP-теореме:

1. Данные записываются на все узлы с задержкой до часа (асинхронная запись):
Такая система будет относиться к согласованной и доступной (CA), но не будет обеспечивать устойчивость к разделению (P).

2. При сетевых сбоях, система может разделиться на 2 раздельных кластера:
Такая система будет обеспечивать устойчивость к разделению (P), но не будет обеспечивать согласованность (C) и доступность (A). Таким образом, система будет относиться к CP, что означает, что при наличии разделения, приложение должно быть предельно осторожным в своих действиях и согласовать все изменения с другими узлами.

3. Система может не прислать корректный ответ или сбросить соединение:
Такая система будет относиться к доступной и устойчивой (AP), но не будет обеспечивать согласованность данных (C).

Согласно PACELC-теореме, можно классифицировать данные реализации:
- Для первой реализации (CA, P), она будет относиться к категории EL (скорее всего, между доступностью и согласованностью).
- Для второй реализации (CP), она будет относиться к категории CL.
- Для третьей реализации (AP), она будет относиться к категории AL.

**Доработка**  

Первый пункт: Система настраивается на согласованность ("C" из CAP) и доступность ("A" из CAP), что приводит к потере прочности ("P" из CAP). Таким образом, данное решение соответствует CA в CAP-теореме.

Второй пункт: Если система может разделиться на два кластера, это означает, что она не укладывается в CP и AP, поэтому она соответствует CA в PACELC-теореме.

Третий пункт: В этом случае система настраивается на высокую доступность и разделение (A и P), что может привести к потере согласованности (C). Это соответствует AP в CAP-теореме или EL в PACELC-теореме.

## Задача 3
Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

**Ответ**

Принципы BASE и ACID - это два различных подхода к управлению транзакционными данными, которые имеют важное значение при проектировании и разработке распределенных систем.

ACID (Atomicity, Consistency, Isolation, Durability) представляет собой традиционный подход к управлению транзакциями, который обеспечивает согласованность данных в пределах транзакции. BASE (Basic Availability, Soft-state, Eventual consistency) - это альтернативный подход, который ставит доступность и гибкость выше согласованности.

Можно создать систему, поддерживающую как принципы BASE, так и ACID, но это может быть достаточно сложно в плане реализации и обслуживания. Возможно, для определенных функциональных блоков или модулей системы может понадобиться использовать принципы ACID для обеспечения согласованности данных, а для других модулей - принципы BASE для обеспечения быстрой доступности данных.

Но в целом, при использовании принципов BASE в системе доступность может иметь приоритет над согласованностью, в то время как при использовании принципов ACID, согласованность имеет приоритет над доступностью. Поэтому, если в системе есть противоречия между принципами BASE и ACID, необходимо проанализировать требования к системе и выбрать тот подход, который наиболее подходит для конкретной задачи и условий использования.

## Задача 4
Вам дали задачу написать системное решение, основой которого бы послужили:

* фиксация некоторых значений с временем жизни
* реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?
 
**Ответ**

Key-value хранилище с механизмом Pub/Sub - это система, которая позволяет хранить и управлять парами ключ-значение, а также позволяет подписаться на определенные события, связанные с этими значениями.

Когда значения в key-value хранилище изменяются, система публикует события в канале Pub/Sub, на который могут подписаться другие компоненты системы для получения информации об изменении.

Одним из известных key-value хранилищ с механизмом Pub/Sub является Redis.

К преимуществам данной системы можно отнести высокую производительность на чтение и запись, гибкость при масштабировании и возможность подписки на определенные события в режиме реального времени.

К минусам выбора Redis как key-value хранилища с механизмом Pub/Sub можно отнести отсутствие встроенной поддержки обработки событий в нескольких потоках. Также это может не подходить для больших объемов данных, которые требуют распределенного хранилища, так как Redis не поддерживает горизонтальное масштабирование без дополнительной настройки и кластеризации. Кроме этого, по сравнению с другими key-value хранилищами, Redis может быть более сложен в настройке и обслуживании.

**Доработка**  

Redis является очень быстрой и гибкой СУБД, у нее есть и некоторые недостатки:

1. Ограниченный размер памяти: Redis предназначен для работы с оперативной памятью, так что размер хранимых данных ограничен объемом доступной памяти на сервере. Хотя Redis поддерживает дисковое хранилище, это может существенно уменьшить его производительность, и оно не будет работать настолько быстро, как память.

2. Недостаточно широкий функционал: Redis не является полноценной СУБД и не поддерживает SQL-запросы. Вместо этого Redis работает только с данными в формате 'ключ-значение'. 

3. Ограниченные возможности по обработке данных: Redis предназначен для быстрой записи и чтения данных в память, и он может оказаться неэффективным, если вам нужно обрабатывать большие объемы данных. Redis не поддерживает сложные запросы, такие как агрегатные функции или объединение таблиц, и он не предоставляет много механизмов для поиска и сортировки.

4. Может быть неустойчивым при сбоях: Redis предназначен для работы в среде с малым количеством сбоев. Если возникают сбои, например проблемы с питанием, Redis может стать неустойчивым и потерять данные.

5. Ограниченная поддержка для связанных данных: Redis не имеет встроенной поддержки для связывания данных между таблицами или базами данных, что может ограничивать возможности хранения и редактирования данных. 

6. Отсутствие транзакционной поддержки: Redis не имеет полной поддержки транзакций, и в некоторых случаях он может не гарантировать атомарности операций, если возникают сбои. 

Таким образом, Redis, хотя и является очень быстрой и гибкой СУБД, имеет свои ограничения и недостатки.